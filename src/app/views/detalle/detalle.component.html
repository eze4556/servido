
<ion-header>
  <ion-toolbar class="custom-toolbar">
    <div class="search-cart-container">
      <div class="search-container">
        <ion-icon name="search" class="icon-search"></ion-icon>
        <ion-input placeholder="Buscar producto o servicio"></ion-input>
      </div>
      <ion-icon name="cart-outline" class="icon-cart" (click)="navigateTo('carrito')"></ion-icon>
    </div>
  <p class="address-text">AcÃ¡ irÃ­a la direcciÃ³n</p>

  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="product$ | async as product">
    <!-- Contenedor principal -->
    <div>
      <!-- TÃ­tulo del producto -->
      <div class="product-header">
        <p class="product-title">{{ product.title }}</p>
      </div>

      <!-- Carrusel -->
      <div
        class="carousel-container"
        (touchstart)="onTouchStart($event)"
        (touchmove)="onTouchMove($event)"
        (touchend)="onTouchEnd()"
      >
        <!-- Contenedor del carrusel -->
        <div
          class="carousel-track"
          [style.transform]="'translateX(' + -currentIndex * 100 + '%)'"
        >
          <div class="carousel-slide" *ngFor="let image of product.images">
            <img [src]="image" [alt]="product.title" class="slider-image" />
          </div>
        </div>

        <!-- Indicadores (cÃ­rculos) -->
        <div class="carousel-indicators">
          <span
            *ngFor="let image of product.images; let i = index"
            class="indicator"
            [class.active]="i === currentIndex"
            (click)="currentIndex = i"
          ></span>
        </div>
      </div>

      <!-- SecciÃ³n de precio, stock y acciones -->
      <div class="price-section">
        <div class="price-and-actions">
          <!-- Precio -->
          <div class="discount-line">
            <span class="discount-price">
              ${{ product.price }}
            </span>
            <!-- Descuento (opcional) -->
            <!-- <span class="discount-percentage" *ngIf="product.discountPercentage">
              {{ product.discountPercentage }}% OFF
            </span> -->
          </div>

          <!-- Botones de acciÃ³n -->
          <div class="action-buttons">
            <div class="favorite-icon">
              <ion-icon name="heart" slot="icon-only"></ion-icon>
            </div>
            <div class="share-icon">
              <ion-icon name="share-social" slot="icon-only"></ion-icon>
            </div>
          </div>
        </div>

        <!-- Stock -->
        <div class="stock-section">
          <p>Stock disponible:</p>
          <ion-chip color="success">
            <ion-label>{{ product.stock }} unidades</ion-label>
          </ion-chip>
        </div>
      </div>
    </div>
  </div>




  <div class="action-buttons">
    <ion-button class="buy-button" (click)="navigateTo('carrito')">
      <ion-label>Comprar ahora</ion-label>
    </ion-button>

    <ion-button class="add-button" (click)="navigateTo('carrito')">
      <ion-icon name="cart-outline"></ion-icon>
      <ion-label>Agregar al carrito</ion-label>
    </ion-button>
  </div>



  <ion-segment [(ngModel)]="selectedSegment" class="details-segment">
    <ion-segment-button
      value="product-details"
      class="segment-button1"
      [ngClass]="{'active': selectedSegment === 'product-details'}">
      <ion-label class="segment-label">Producto</ion-label>
    </ion-segment-button>

    <ion-segment-button
      value="seller"
      class="segment-button1"
      [ngClass]="{'active': selectedSegment === 'seller'}">
      <ion-label class="segment-label">Vendedor</ion-label>
    </ion-segment-button>

    <ion-segment-button
      value="opinions"
      class="segment-button1"
      [ngClass]="{'active': selectedSegment === 'opinions'}">
      <ion-label class="segment-label">Opiniones</ion-label>
    </ion-segment-button>

    <ion-segment-button
      value="faq"
      class="segment-button1"
      [ngClass]="{'active': selectedSegment === 'faq'}">
      <ion-label class="segment-label">FAQ</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Contenedor dinÃ¡mico -->
  <div [ngSwitch]="selectedSegment" class="segment-content">

    <!-- SecciÃ³n Producto -->
    <div *ngSwitchCase="'product-details'" class="product-section">
      <h2 class="section-title">CaracterÃ­sticas generales</h2>
      <table class="product-details-table">
        <tr>
          <td class="details-label"><strong>Marca</strong></td>
          <td>Fate</td>
        </tr>
        <tr>
          <td class="details-label"><strong>Modelo</strong></td>
          <td>Sensitiva</td>
        </tr>
        <tr>
          <td class="details-label"><strong>TamaÃ±o</strong></td>
          <td>195/65R15</td>
        </tr>
        <tr>
          <td class="details-label"><strong>Cantidad</strong></td>
          <td>2</td>
        </tr>
        <tr>
          <td class="details-label"><strong>Velocidad mÃ¡xima</strong></td>
          <td>210 km/h</td>
        </tr>
      </table>

      <h2 class="section-title">DescripciÃ³n</h2>
      <p class="product-description">
        Â¿Vas a esperar a que tu neumÃ¡tico se desgaste para cambiarlo?<br>
        PodÃ©s evitar alargar la vida Ãºtil de una vieja cubierta y apostar a tu tranquilidad.
        EncontrÃ¡ la mejor tracciÃ³n, direcciÃ³n y confort con tu Fate Sport.<br>
        Estabilidad y control.<br>
        Gracias a su buen agarre, este neumÃ¡tico tiene un desempeÃ±o Ã³ptimo asegurado,
        ya que se adapta a la usabilidad de tu vehÃ­culo.
      </p>
    </div>


<!-- SecciÃ³n Vendedor -->
<div *ngSwitchCase="'seller'" class="seller-section">
  <h3 class="seller-title">InformaciÃ³n del vendedor</h3>

  <!-- Tarjeta del Vendedor -->
  <div class="seller-card">
    <img src="../../../assets/icon/gomeria.png" alt="Logo Vendedor" class="seller-logo" />
    <div class="seller-details">
      <h4 class="seller-name">GomerÃ­a JosÃ©</h4>
      <div class="seller-rating">
        <span class="stars">4.5 â˜…â˜…â˜…â˜…â˜…</span>
        <span class="rating-count">(363)</span>
      </div>
      <button class="store-button">Ver tienda</button>
    </div>
  </div>

  <!-- Plan Exclusivo -->
  <div class="exclusive-plan">
    <span class="plan-icon">ðŸ’Ž</span>
    <span class="plan-text">PLAN EXCLUSIVO</span>
  </div>

  <!-- InformaciÃ³n Adicional -->
  <div class="seller-info">
    <p><strong>Provincia:</strong> Buenos Aires</p>
    <p><strong>Ciudad:</strong> La Plata</p>
    <p><strong>DirecciÃ³n:</strong> Calle 7 NÂº 1234, Barrio Centro</p>
  </div>

  <!-- BotÃ³n de WhatsApp -->
  <div class="whatsapp-container">
    <button class="whatsapp-button">
      <img src="../../../assets/icon/wsplogo.png" alt="WhatsApp" class="whatsapp-icon" />
      Hablar al whatsapp
    </button>
  </div>
</div>


<!-- SecciÃ³n Opiniones -->
<div *ngSwitchCase="'opinions'" class="opinions-section">
  <h3 class="section-title">Opiniones del producto</h3>

  <!-- CalificaciÃ³n general -->
  <div class="general-rating">
    <span class="rating-score">4.5</span>
    <span class="stars">
      â˜…â˜…â˜…â˜…â˜…
      <span class="stars-filled">â˜…â˜…â˜…â˜…â˜†</span>
    </span>
    <span class="rating-count">363 calificaciones</span>
  </div>

  <!-- Lista de reseÃ±as -->
  <div *ngFor="let opinion of opinions" class="review-item">
    <div class="review-header">
      <span class="stars">
        â˜…â˜…â˜…â˜…â˜…
        <span class="stars-filled">{{ getFilledStars(opinion.rating) }}</span>
      </span>
      <span class="review-date">{{ formatDate(opinion.date) }}</span>
    </div>
    <p class="review-comment">{{ opinion.comment }}</p>
  </div>

  <!-- Mensaje si no hay reseÃ±as -->
  <p *ngIf="opinions.length === 0" class="no-reviews">
    AÃºn no hay opiniones para este producto.
  </p>

  <!-- BotÃ³n para agregar opiniÃ³n -->
  <div class="add-opinion-button">
    <ion-button class="buy-button" (click)="navigateTo('opinion')">
      Agregar OpiniÃ³n
    </ion-button>
  </div>
</div>



<!-- SecciÃ³n FAQ -->
<div *ngSwitchCase="'faq'" class="faq-section">
  <h3 class="section-title">Preguntas Frecuentes</h3>

  <!-- Input de preguntas -->
  <div class="faq-input-container">
    <input type="text" placeholder="EscribÃ­ tu pregunta..." class="faq-input" />
    <p class="response-time">Tiempo aproximado de respuesta: 8 minutos</p>
    <button class="faq-button">Preguntar</button>
  </div>

  <!-- Lista de preguntas y respuestas -->
  <div class="faq-list">
    <div *ngFor="let faq of faqs" class="faq-item">
      <p class="question">{{ faq.question }}</p>
      <p class="answer">{{ faq.answer }}</p>
    </div>
  </div>
</div>


    <!-- Contenido por defecto -->
    <div *ngSwitchDefault>
      <p>Selecciona una opciÃ³n para ver mÃ¡s informaciÃ³n.</p>
    </div>

  </div>

</ion-content>

<ion-footer>
  <ion-toolbar class="fixed-toolbar">
    <!-- Tabs -->
    <div class="fixed-tabs">
      <!-- Tab: Inicio -->
      <div
        class="tab-item"
        [class.active]="currentRoute === 'home'"
        (click)="navigateTo('home')"
      >
        <ion-icon name="home-outline"></ion-icon>
        <ion-label>Inicio</ion-label>
      </div>

      <!-- Tab: Tienda -->
      <div
        class="tab-item"
        [class.active]="currentRoute === 'tienda'"
        (click)="navigateTo('tienda')"
      >
        <ion-icon name="storefront-outline"></ion-icon>
        <ion-label>Tienda</ion-label>
      </div>

      <!-- Tab: Notificaciones -->
      <div
        class="tab-item"
        [class.active]="currentRoute === 'notificaciones'"
        (click)="navigateTo('notificaciones')"
      >
        <ion-icon name="notifications-outline"></ion-icon>
        <ion-label>Notificaciones</ion-label>
      </div>

      <!-- Tab: ConfiguraciÃ³n -->
      <div
        class="tab-item"
        [class.active]="currentRoute === 'mi-cuenta'"
        (click)="navigateTo('mi-cuenta')"
      >
        <ion-icon name="settings-outline"></ion-icon>
        <ion-label>MÃ¡s</ion-label>
      </div>
    </div>
  </ion-toolbar>
</ion-footer>
